i,*_,l=open(0)
a=int(i[12:])
p=eval(l[9:])
v,w=[n for c,n in zip(*[iter(p)]*2)if c==1]
n=lambda a:w^7&a>>(V:=a&7^v)^V
while a:l+=f",{n(a)}";a>>=3
def s(a,i):i>15<print(l[41:],a);[n(j:=a<<3|x)==p[~i]==s(j,i+1)for x in range(i<1,8)]
s(0,0)