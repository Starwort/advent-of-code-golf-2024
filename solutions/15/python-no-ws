D=open(0).read();exec("S=lambda"+chr(32)+"p:36>(w:=ord(H[a:=p+d]))or(w>79)and(S(a+92-w))or(w>64)and(S(a))or(exec('H[a],H[p]=H[p],H[a]'));l=51;"+"p=99%l*24+96;G=D\nfor(m)in(D):*H,=G;d=[1,-l,l,-1,0]['>^v<'.find(m)];S(p)or(p:=p+d,G:=H)\nprint(sum(p%l+p//l*100for(p,v)in(enumerate(G))if(v)in'O['));D=D.translate({35:'##',46:'..',79:'[]',64:'@.'});l=101;"*2)