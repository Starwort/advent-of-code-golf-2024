C,s,*Q={},sorted
for l in open(0):
 if'-'in l:a,x,b,_,c=C[c]=l.split();l=f"{c}:{a}().__{x.lower()}__({b}())"
 exec(l.replace(':','=lambda:'))
for c in C:x,a,b=s(C[c][:3]);O='OR'in[C[k][c in C[k]]for k in C];Q+=[c]*['z'<c<'z4'or('x01'>a)|O<1,O|(b<'x'>c)]['X'<x]
print(sum(eval(f"z{i:02}()")<<i for i in range(46)),','.join(s(Q)))