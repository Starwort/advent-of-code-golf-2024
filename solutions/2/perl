map{@A=glob;$o=0;for$r(-1..@A - 2){@a=@A[0..$r,$r+2..$#A];$y=$z=$q=0;map{$x=$_-$a[$q++];$y+=0<$x<4;$z+=0>$x&&$x>-4;}@a[1..$#a];$o|=($y+$z==$#a&&(!$y||!$z))}$y=$z=$q=0;map{$x=$_-$A[$q++];$y+=0<$x<4;$z+=0>$x&&$x>-4;}@A[1..$#A];$m+=($u=$y+$z==$#A&&(!$y||!$z));$\+=$o||$u}<>;print"$m "